id: 13445
game_id: 1821
game_slug: heretic-ii
name: Heretic II
year: 1998
user: legluondunet
runner: wine
slug: heretic-ii-cd-dxwnd-ws-patch
version: CD + DxWnD + WS patch
description: "This script will install \"Heretic II\" Windows CD edition with support\
  \ for modern computer configuration.\r\nDuring install please let all options by\
  \ default.\r\nThis script uses different projects:\r\nDxWnd: https://sourceforge.net/projects/dxwnd/\r\
  \nGNU32 tools: http://gnuwin32.sourceforge.net/\r\nMplayer: http://www.mplayerhq.hu/design7/news.html\r\
  \nSox: http://sox.sourceforge.net\r\nThanks to the people who contribute to play\
  \ this game in the best conditions."
notes: "- WS patch: the game will be patch during install to use your desktop native\
  \ resolution.\r\n- Multilanguage: you will be able to select  others game  language\
  \ during install between french, german, spanish or italian.\r\n- 1.07 update.\r\
  \n- You will need the H2 CD only during installation.\r\nKnowns issues:\r\n- Heretic\
  \ II will crash if you launch directly a new game (Wine Bug 40468 https://bugs.winehq.org/show_bug.cgi?id=40468).\
  \ Workaround: start the tutorial level first, escape to the main menu, start a new\
  \ game. This bug only occurs if you launch a new game directly, not when you load\
  \ or save a game.\r\n- Changing resolution will crash H2.\r\n- H2 controller support\
  \ is insufficient . Instead I invite you to use a keymapper like Antimicro or sc-controller.\
  \ You will find profiles for x360 and Steam Controller in the \"gamepad profiles\"\
  \ folder.\r\n- Please report issue concerning this script on my Github page:\r\n\
  https://github.com/legluondunet/MyLittleLutrisScripts/"
created_at: '2019-05-10T19:23:17.825000Z'
updated_at: '2019-11-04T19:26:52.528879Z'
draft: false
published: true
published_by: 494
rating: ''
steamid: null
gogid: null
gogslug: ''
humblestoreid: ''
script:
  custom-name: HERETIC II - Windows CD
  game:
    prefix: $GAMEDIR
    args: c:\\heretic2.bat
    exe: drive_c/windows/syswow64/wineconsole.exe
  installer:
  - task:
      prefix: $GAMEDIR
      description: Preparing Heretic II Windows CD wineprefix...
      arch: win64
      name: create_prefix
  - insert-disc:
      requires: h2_setup.exe
  - task:
      executable: $GAMEDIR/drive_c/windows/explorer.exe
      prefix: $GAMEDIR
      args: /desktop=HereticII,1024x780 $DISC/h2_setup.exe
      description: Running setup of the game. Just proceed and keep all settings at
        their defaults
      name: wineexec
  - extract:
      dst: $GAMEDIR/drive_c/dxwnd
      file: dxwnd
  - write_config:
      data:
        target:
          tflag0: 0
          coord0: 3
          flagi0: 138444804
          flag0: 673194017
          swapeffect0: 0
          flagj0: 4224
          codepage0: 0
          posy0: 50
          posx0: 50
          flagl0: 0
          flagk0: 65536
          path0: C:\Program Files (x86)\Heretic II\heretic2.exe
          dflagb0: 0
          initts0: 0
          sizx0: 800
          winver0: 0
          sizy0: 600
          maxfps0: 0
          flagq0: 0
          commitaddress0: 0
          ver0: 0
          startfolder0: C:\Program Files (x86)\Heretic II\
          flago0: 0
          initresw0: 800
          title0: Heretic II
          scanline0: 0
          flagg0: 1207959552
          maxddinterface0: 7
          dflag0: 0
          launchpath0: C:\Program Files (x86)\Heretic II\heretic2.exe +set vid_ref
            glx +set vid_mode 3 +set vid_fullscreen 1
          lang0: 0
          flagh0: 22
          monitorid0: -1
          flagm0: 65536
          slowratio0: 2
          flagn0: 17825796
          renderer0: 3
          filterid0: 0
          icon0: 0000010001002020000001002000B410000016000000280000002000000040000000010020000300000080100000000000000000000000000000000000000000FF0000FF0000FF0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000408000FF000000FF0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000D5008080FF400000FF000040CC0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000B900000000000000000000000000000000000000FF000000FF000000FF000000FF00000000000000000000000000000000000000FF000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FF0000000000000000000000000000000000000000000040FF000000FF0000000000000000000000000000000000000000400000FF000000640000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000FF004000FF0000000000000000000000000000000000000000000000000000000A000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009A000000000000000000000000000000000000000000000000000000FF000000FF000000000000000000000000000000000000000000000000000000900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400080FF000000FF00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FF00000000000000000000000000000000000000000000000000000000408080FF000000FF00000000000000000000000000000000000000000000000000000000000000FF0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F600000000000000000000000000000000000000000000000000000000400080FF000000FF000000000000000000000000000000000000000000000000000000000000002000000041000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080FF0000008400000000000000000000000000000000000000000000000000000000408080FF000000FF0000000000000000000000000000000000000000000000000000000000000004000000FF000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000080FF000000FF00000000000000000000000000000000000000000000000000000000008080FF000000FF20008020000000000000000000000000000000000000000000000000000000D1000080FF000000FF00000000000000000000000000000000000000000000000000000000000000000000000000000000008080FF000000FF400080FF000000B000000000000000000000000000000000000000FF008080FF000080FF000080FF000080FF000000FF000000B100000000000000000000000000000040000080FF008080FF000000FF0000000000000000000000000000000000000000000000000000000000000000000000000000000000000070000000BE0000000000000000000000000000000000000000000000000000000000000000000080FF008080FF000000040000000000000000000000000000000000000000000000000000000000000000000000FF0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000204080FF000080FF000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080FF000080FF000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000508080FF000080FF000000280000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000408080FF000080FF000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000408080FF000080FF000000290000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080FF000000FF204000E30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080FF004000FF0040008600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080C0FF000000FF000000FF000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080FF000000000000000000000000000000000000000000000000008080FF80C0C0FF000080FF000080FF000000000000000000000000000000000000000000000000000080FF204000A2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F60000000000000000000000000000000000000000000000000000000000000020000080FF000080FF400000FF00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000A0FF400000FF000000FF0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040000042008080FF400000FF404000FF00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008080FF000080FF000000FF400080FF400080FF0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000FF000080FF400080FF400080FF406080FF400080FF000000B000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
          maxres0: -1
          cdvol0: 64
          initresh0: 600
          commitlength0: 0
          country0: 0
          flagp0: 8192
      file: $GAMEDIR/drive_c/dxwnd/dxwnd.ini
  - extract:
      src: patch107w
      dst: $GAMEDIR/drive_c/Program Files (x86)/Heretic II/tmp1/
  - extract:
      src: patch106l
      dst: $GAMEDIR/drive_c/Program Files (x86)/Heretic II/tmp2/
  - chmodx: scriptcase
  - execute:
      args: '''$GAMEDIR/drive_c/Program Files (x86)/Heretic II/'' ''0'''
      file: scriptcase
  - merge:
      src: $GAMEDIR/drive_c/Program Files (x86)/Heretic II/tmp1/
      dst: $GAMEDIR/drive_c/Program Files (x86)/Heretic II/
  - chmodx: scriptws
  - execute:
      args: $RESOLUTION_WIDTH $RESOLUTION_HEIGHT
      file: scriptws
  - input_menu:
      options:
      - keep: I prefer to use default install language
      - fr: French
      - ge: German
      - it: Italian
      - sp: Spanish
      description: 'Please choose wich language you would like to install this game:'
      id: LANG
      preselect: keep
  - chmodx: scriptlocal
  - execute:
      args: $INPUT_LANG
      file: scriptlocal
  - chmodx: scriptconf
  - execute:
      file: scriptconf
  - extract:
      dst: $GAMEDIR/drive_c/Program Files (x86)/Heretic II/tmp3/
      file: mp
  - extract:
      dst: $GAMEDIR/drive_c/Program Files (x86)/Heretic II/tmp3/
      file: gnusox
  - extract:
      dst: $GAMEDIR/drive_c/Program Files (x86)/Heretic II/tmp3/
      file: grepbin
  - extract:
      dst: $GAMEDIR/drive_c/Program Files (x86)/Heretic II/tmp3/
      file: grepdep
  - task:
      executable: scriptsound
      prefix: $GAMEDIR
      name: wineexec
  - move:
      src: menu
      dst: $GAMEDIR/drive_c/
  - move:
      src: faq
      dst: $GAMEDIR/drive_c/Program Files (x86)/Heretic II/
  - merge:
      src: gppreadme
      dst: $GAMEDIR/drive_c/Program Files (x86)/Heretic II/gamepad profiles
  - copy:
      src: gppx360
      dst: $GAMEDIR/drive_c/Program Files (x86)/Heretic II/gamepad profiles
  - copy:
      src: gppsc
      dst: $GAMEDIR/drive_c/Program Files (x86)/Heretic II/gamepad profiles
  - task:
      prefix: $GAMEDIR
      name: set_regedit
      arch: win64
      type: REG_DWORD
      value: '00000000'
      key: csmt
      path: HKEY_CURRENT_USER\Software\Wine\Direct3D\
  - task:
      prefix: $GAMEDIR
      name: set_regedit
      arch: win64
      type: REG_SZ
      value: Y
      key: EAXEnabled
      path: HKEY_CURRENT_USER\Software\Wine\DirectSound
  - move:
      src: wpp
      dst: $GAMEDIR/drive_c/
  - task:
      prefix: $GAMEDIR
      name: set_regedit
      arch: win64
      type: REG_SZ
      value: c:\\heretic2.bmp
      key: wallpaper
      path: HKEY_CURRENT_USER\Control Panel\Desktop\
  - task:
      prefix: $GAMEDIR
      name: set_regedit
      arch: win64
      type: REG_SZ
      value: 0 0 0
      key: background
      path: HKEY_CURRENT_USER\Control Panel\Colors\
  - task:
      prefix: $GAMEDIR
      name: set_regedit
      arch: win64
      type: REG_SZ
      value: 0 0 0
      key: ActiveTitle
      path: HKEY_CURRENT_USER\Control Panel\Colors\
  - task:
      prefix: $GAMEDIR
      name: set_regedit
      arch: win64
      type: REG_SZ
      value: 204 153 255
      key: GradientActiveTitle
      path: HKEY_CURRENT_USER\Control Panel\Colors\
  - execute:
      command: cd "$GAMEDIR/drive_c/Program Files (x86)/Heretic II/" ; rm -f -r tmp1
        tmp2 tmp3;
  wine:
    Desktop: true
  files:
  - dxwnd: https://freefr.dl.sourceforge.net/project/dxwnd/Latest%20build/v2_05_28_build.rar
  - patch107w: http://heretics-hexens.ucoz.com/ht2_ep_v1-07.7z
  - patch106l: https://github.com/liflg/heretic.2_1.06c-english_x86/archive/master.zip
  - scriptcase: https://github.com/legluondunet/mlls-tools/raw/master/scripts/changecase.sh
  - scriptlocal: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Heretic%20II/h2local.sh
  - scriptws: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Heretic%20II/hereticiiws.sh
  - scriptconf: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Heretic%20II/defconfig.sh
  - scriptsound: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Heretic%20II/soundtrack.bat
  - mp: https://freefr.dl.sourceforge.net/project/mplayer-win32/MPlayer%20and%20MEncoder/r38135%2Bgb272d5b9b6/MPlayer-generic-r38135%2Bgb272d5b9b6.7z
  - gnusox: https://freefr.dl.sourceforge.net/project/sox/sox/14.4.2/sox-14.4.2-win32.zip
  - grepbin: http://downloads.sourceforge.net/gnuwin32/grep-2.5.4-bin.zip
  - grepdep: http://downloads.sourceforge.net/gnuwin32/grep-2.5.4-dep.zip
  - menu: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Heretic%20II/HERETIC2.BAT
  - faq: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Heretic%20II/faq.html
  - gppreadme: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Heretic%20II/gamepad%20profiles/h2_gamepad_readme.html
  - gppx360: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Heretic%20II/gamepad%20profiles/h2_x360.gamecontroller.amgp
  - gppsc: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Heretic%20II/gamepad%20profiles/h2_steam.sccprofile
  - wpp: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Heretic%20II/heretic2.bmp
